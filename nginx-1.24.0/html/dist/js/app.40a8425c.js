(function(){"use strict";var e={4016:function(e,t,a){var s=a(5130),l=a(6768);const o={id:"app"},r=(0,l.Lk)("i",{class:"el-icon-house"},null,-1),n=(0,l.Lk)("i",{class:"el-icon-user"},null,-1),d=(0,l.Lk)("i",{class:"el-icon-user"},null,-1),i=(0,l.Lk)("i",{class:"el-icon-setting"},null,-1),u=(0,l.Lk)("i",{class:"el-icon-school"},null,-1),c=(0,l.Lk)("i",{class:"el-icon-document"},null,-1),h=(0,l.Lk)("i",{class:"el-icon-trophy"},null,-1),m=(0,l.Lk)("i",{class:"el-icon-user"},null,-1),g=(0,l.Lk)("i",{class:"el-icon-user"},null,-1),p=(0,l.Lk)("i",{class:"el-icon-switch-button"},null,-1);function f(e,t,a,s,f,b){const k=(0,l.g2)("el-menu-item"),C=(0,l.g2)("el-menu"),F=(0,l.g2)("el-aside"),v=(0,l.g2)("router-view"),y=(0,l.g2)("el-main"),_=(0,l.g2)("el-container");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(_,null,{default:(0,l.k6)((()=>[(0,l.bF)(F,{width:"200px",class:"menu-aside"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{"default-active":f.activeIndex,class:"el-menu-vertical-demo",onSelect:b.handleSelect,"background-color":"#333","text-color":"#fff","active-text-color":"#ffd04b"},{default:(0,l.k6)((()=>[(0,l.bF)(k,{index:"1",onClick:b.goHome},{default:(0,l.k6)((()=>[r,(0,l.eW)(" 主页")])),_:1},8,["onClick"]),f.isDean?((0,l.uX)(),(0,l.Wv)(k,{key:0,index:"2",onClick:b.goTeacherManagement},{default:(0,l.k6)((()=>[n,(0,l.eW)(" 教师管理")])),_:1},8,["onClick"])):(0,l.Q3)("",!0),f.isDean?((0,l.uX)(),(0,l.Wv)(k,{key:1,index:"3",onClick:b.goStudentManagement},{default:(0,l.k6)((()=>[d,(0,l.eW)(" 学生管理")])),_:1},8,["onClick"])):(0,l.Q3)("",!0),f.isDean?((0,l.uX)(),(0,l.Wv)(k,{key:2,index:"4",onClick:b.goDeanManagement},{default:(0,l.k6)((()=>[i,(0,l.eW)(" 教务管理")])),_:1},8,["onClick"])):(0,l.Q3)("",!0),f.isDean?((0,l.uX)(),(0,l.Wv)(k,{key:3,index:"5",onClick:b.goClassManagement},{default:(0,l.k6)((()=>[u,(0,l.eW)(" 班级管理")])),_:1},8,["onClick"])):(0,l.Q3)("",!0),f.isStudent?((0,l.uX)(),(0,l.Wv)(k,{key:4,index:"6",onClick:b.goStudentInfo},{default:(0,l.k6)((()=>[c,(0,l.eW)(" 学生信息")])),_:1},8,["onClick"])):(0,l.Q3)("",!0),f.isStudent?((0,l.uX)(),(0,l.Wv)(k,{key:5,index:"7",onClick:b.goStudentCourseManagement},{default:(0,l.k6)((()=>[h,(0,l.eW)(" 我的课程与成绩")])),_:1},8,["onClick"])):(0,l.Q3)("",!0),f.isTeacher?((0,l.uX)(),(0,l.Wv)(k,{key:6,index:"8",onClick:b.goTeacherInfo},{default:(0,l.k6)((()=>[m,(0,l.eW)(" 教师信息")])),_:1},8,["onClick"])):(0,l.Q3)("",!0),f.isLoggedIn?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(k,{key:7,index:"9",onClick:b.goLogin},{default:(0,l.k6)((()=>[g,(0,l.eW)(" 登录")])),_:1},8,["onClick"])),f.isLoggedIn?((0,l.uX)(),(0,l.Wv)(k,{key:8,index:"10",onClick:b.logout},{default:(0,l.k6)((()=>[p,(0,l.eW)(" 注销")])),_:1},8,["onClick"])):(0,l.Q3)("",!0)])),_:1},8,["default-active","onSelect"])])),_:1}),(0,l.bF)(y,null,{default:(0,l.k6)((()=>[(0,l.bF)(v)])),_:1})])),_:1})])}a(4114);var b=a(4373);const k=b.A.create({baseURL:"http://localhost:8080",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});var C=k,F={data(){return{activeIndex:"1",isLoggedIn:!!localStorage.getItem("user-code"),isDean:"dean"===localStorage.getItem("user-type"),isStudent:"student"===localStorage.getItem("user-type"),isTeacher:"teacher"===localStorage.getItem("user-type")}},methods:{handleSelect(e,t){console.log(e,t)},goHome(){this.$router.push("/"),this.activeIndex="1"},goTeacherManagement(){this.$router.push("/teacherManagement"),this.activeIndex="2"},goStudentManagement(){this.$router.push("/studentManagement"),this.activeIndex="3"},goDeanManagement(){this.$router.push("/deanManagement"),this.activeIndex="4"},goClassManagement(){this.$router.push("/classManagement"),this.activeIndex="5"},goStudentInfo(){this.$router.push("/studentInfo"),this.activeIndex="6"},goStudentCourseManagement(){this.$router.push("/studentCourseManagement"),this.activeIndex="7"},goTeacherInfo(){this.$router.push("/teacherInfo"),this.activeIndex="8"},goLogin(){this.$router.push("/login"),this.activeIndex="9"},logout(){C.get("/logout").then((e=>{200===e.data.code?(localStorage.removeItem("user-code"),localStorage.removeItem("user-type"),this.isLoggedIn=!1,this.isDean=!1,this.isStudent=!1,this.isTeacher=!1,this.$router.push("/login"),this.$message.success("注销成功")):this.$message.error("注销失败: "+e.data.msg)})).catch((e=>{console.error("注销时出错:",e),this.$message.error("注销时发生错误")}))}},watch:{$route(){this.isLoggedIn=!!localStorage.getItem("user-code"),this.isDean="dean"===localStorage.getItem("user-type"),this.isStudent="student"===localStorage.getItem("user-type"),this.isTeacher="teacher"===localStorage.getItem("user-type")}}},v=a(1241);const y=(0,v.A)(F,[["render",f]]);var _=y,I=a(1387),w=a(4232);const V=e=>((0,l.Qi)("data-v-d9014444"),e=e(),(0,l.jt)(),e),S={class:"home"},$=V((()=>(0,l.Lk)("h1",null,"欢迎使用计算机学院管理系统",-1))),W=V((()=>(0,l.Lk)("p",null,"赋能未来创新者",-1))),L={class:"features"},T={class:"feature"},D=V((()=>(0,l.Lk)("h2",null,"本院学生",-1))),A={key:0},X={key:1},x={class:"feature"},E=V((()=>(0,l.Lk)("h2",null,"本院教学人员",-1))),M={key:0},U={key:1},q={class:"feature"},G=V((()=>(0,l.Lk)("h2",null,"本院行政人员",-1))),N={key:0},Q={key:1};function B(e,t,a,s,o,r){const n=(0,l.g2)("el-carousel-item"),d=(0,l.g2)("el-carousel");return(0,l.uX)(),(0,l.CE)("div",S,[$,W,(0,l.Lk)("div",L,[(0,l.Lk)("div",T,[D,o.students.length?((0,l.uX)(),(0,l.CE)("p",A,"总数："+(0,w.v_)(o.students.length),1)):((0,l.uX)(),(0,l.CE)("p",X,"加载学生数据中...")),o.students.length?((0,l.uX)(),(0,l.Wv)(d,{key:2,interval:2e3,type:"card",height:"200px","indicator-position":"none"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.students,(e=>((0,l.uX)(),(0,l.Wv)(n,{key:e.student.id},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,w.v_)(e.student.name)+" - "+(0,w.v_)(e.classGroup.name)+" - "+(0,w.v_)(e.speciality.name)+" - "+(0,w.v_)(e.college.name),1)])),_:2},1024)))),128))])),_:1})):(0,l.Q3)("",!0)]),(0,l.Lk)("div",x,[E,o.teachers.length?((0,l.uX)(),(0,l.CE)("p",M,"总数："+(0,w.v_)(o.teachers.length),1)):((0,l.uX)(),(0,l.CE)("p",U,"加载教师数据中...")),o.teachers.length?((0,l.uX)(),(0,l.Wv)(d,{key:2,interval:2e3,type:"card",height:"200px","indicator-position":"none"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.teachers,(e=>((0,l.uX)(),(0,l.Wv)(n,{key:e.teacher.id},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,w.v_)(e.teacher.name)+" - "+(0,w.v_)(e.college.name),1)])),_:2},1024)))),128))])),_:1})):(0,l.Q3)("",!0)]),(0,l.Lk)("div",q,[G,o.deans.length?((0,l.uX)(),(0,l.CE)("p",N,"总数："+(0,w.v_)(o.deans.length),1)):((0,l.uX)(),(0,l.CE)("p",Q,"加载院长数据中...")),o.deans.length?((0,l.uX)(),(0,l.Wv)(d,{key:2,interval:2e3,type:"card",height:"200px","indicator-position":"none"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.deans,(e=>((0,l.uX)(),(0,l.Wv)(n,{key:e.id},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,w.v_)(e.name)+" - "+(0,w.v_)(e.remark),1)])),_:2},1024)))),128))])),_:1})):(0,l.Q3)("",!0)])])])}const j={fetchStudents(){return C.get("/students")},fetchClassGroups(){return C.get("/class/all")},saveStudent(e){const t=e.id?C.put:C.post,a=e.id?`/students/${e.id}`:"/students";return t(a,e)},deleteStudent(e){return C.delete(`/students/${e}`)},fetchStudentInfo(e){return C.get(`/students/${e}`)}};var z=j;const O={fetchTeachers(){return C.get("/teacher/all")},fetchColleges(){return C.get("/college/all")},saveTeacher(e){const t=e.id?C.put:C.post,a=e.id?"/teacher/update":"/teacher/add";return t(a,e)},deleteTeacher(e){return C.delete(`/teacher/delete/${e}`)},fetchAssignedCourses(e){return C.get(`/teacherCourse/teacher/${e}/courses`).then((e=>{const t=e.data.map((e=>C.get(`/terms/${e.termId}`).then((t=>({...e,term:t.data})))));return Promise.all(t)}))},fetchAvailableCourses(){return C.get("/courses")},addCourse(e){return C.post("/teacherCourse/add",e)},removeCourse(e,t){return C.get(`/teacherCourse/teacher/${e}/teacherCourses`).then((e=>{const a=e.data.find((e=>e.courseId===t));if(a)return C.delete(`/teacherCourse/delete/${a.id}`)}))},getTeacherByCode(e){return C.get(`/teacher/getByCode/${e}`)},getCollegeById(e){return C.get(`/college/get/${e}`)},getTeacherCourses(e){return C.get(`/teacherCourse/teacher/${e}/courses`)},getTermById(e){return C.get(`/terms/${e}`)}};var R=O;const P={fetchDeans(){return C.get("/dean/all")},saveDean(e){const t=e.id?C.put:C.post,a=e.id?"/dean/update":"/dean/add";return t(a,e)},deleteDean(e){return C.delete(`/dean/delete/${e}`)}};var K=P,H={name:"HomeView",data(){return{students:[],teachers:[],deans:[]}},created(){this.fetchStudents(),this.fetchTeachers(),this.fetchDeans()},methods:{async fetchStudents(){try{const e=await z.fetchStudents();this.students=e.data}catch(e){console.error("获取学生数据时出错:",e)}},async fetchTeachers(){try{const e=await R.fetchTeachers();this.teachers=e.data}catch(e){console.error("获取教师数据时出错:",e)}},async fetchDeans(){try{const e=await K.fetchDeans();this.deans=e.data}catch(e){console.error("获取院长数据时出错:",e)}}}};const J=(0,v.A)(H,[["render",B],["__scopeId","data-v-d9014444"]]);var Y=J;const Z=e=>((0,l.Qi)("data-v-23e56070"),e=e(),(0,l.jt)(),e),ee={class:"login-container"},te={class:"login-card"},ae=Z((()=>(0,l.Lk)("h2",{class:"login-title"},"用户登录",-1)));function se(e,t,a,o,r,n){const d=(0,l.g2)("el-input"),i=(0,l.g2)("el-form-item"),u=(0,l.g2)("el-option"),c=(0,l.g2)("el-select"),h=(0,l.g2)("el-button"),m=(0,l.g2)("el-form");return(0,l.uX)(),(0,l.CE)("div",ee,[(0,l.Lk)("div",te,[ae,(0,l.bF)(m,{model:r.loginForm,onSubmit:(0,s.D$)(n.onSubmit,["prevent"]),ref:"loginForm"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{label:"工号",prop:"code",rules:[{required:!0,message:"请输入工号",trigger:"blur"}]},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:r.loginForm.code,"onUpdate:modelValue":t[0]||(t[0]=e=>r.loginForm.code=e),autocomplete:"off",placeholder:"请输入工号"},null,8,["modelValue"])])),_:1}),(0,l.bF)(i,{label:"密码",prop:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},{default:(0,l.k6)((()=>[(0,l.bF)(d,{type:"password",modelValue:r.loginForm.password,"onUpdate:modelValue":t[1]||(t[1]=e=>r.loginForm.password=e),autocomplete:"off",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),(0,l.bF)(i,{label:"用户类型",prop:"type",rules:[{required:!0,message:"请选择用户类型",trigger:"change"}]},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:r.loginForm.type,"onUpdate:modelValue":t[2]||(t[2]=e=>r.loginForm.type=e),placeholder:"选择用户类型"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{label:"教务",value:"dean"}),(0,l.bF)(u,{label:"教师",value:"teacher"}),(0,l.bF)(u,{label:"学生",value:"student"})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(i,null,{default:(0,l.k6)((()=>[(0,l.bF)(h,{type:"primary",onClick:n.onSubmit,loading:r.loading},{default:(0,l.k6)((()=>[(0,l.eW)("登录")])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","onSubmit"])])])}var le={name:"UserLogin",data(){return{loginForm:{code:"",password:"",type:""},loading:!1}},methods:{onSubmit(){this.$refs.loginForm.validate((e=>{e&&(this.loading=!0,C.post("/login",this.loginForm).then((e=>{this.loading=!1,200===e.data.code?(localStorage.setItem("user-code",this.loginForm.code),localStorage.setItem("user-type",this.loginForm.type),localStorage.setItem("user-id",e.data.id),this.$router.push("/")):this.$message.error("登录失败: "+e.data.msg)})).catch((e=>{this.loading=!1,console.error("登录时出错:",e),this.$message.error("登录时发生错误")})))}))}}};const oe=(0,v.A)(le,[["render",se],["__scopeId","data-v-23e56070"]]);var re=oe;const ne={class:"teacher-management"};function de(e,t,a,s,o,r){const n=(0,l.g2)("el-button"),d=(0,l.g2)("el-input"),i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-form-item"),h=(0,l.g2)("el-option"),m=(0,l.g2)("el-select"),g=(0,l.g2)("el-form"),p=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",ne,[(0,l.bF)(n,{type:"primary",onClick:r.fetchTeachers},{default:(0,l.k6)((()=>[(0,l.eW)("获取所有教师信息")])),_:1},8,["onClick"]),(0,l.bF)(n,{type:"success",onClick:r.openAddTeacherDialog},{default:(0,l.k6)((()=>[(0,l.eW)("添加教师")])),_:1},8,["onClick"]),(0,l.bF)(d,{modelValue:o.search,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search=e),size:"default",placeholder:"输入关键字搜索",style:{margin:"20px 0"}},null,8,["modelValue"]),(0,l.bF)(u,{data:o.teachers.filter((e=>!o.search||e.name.toLowerCase().includes(o.search.toLowerCase()))),style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"id",label:"ID",width:"180"}),(0,l.bF)(i,{prop:"name",label:"姓名",width:"180"}),(0,l.bF)(i,{prop:"code",label:"工号",width:"180"}),(0,l.bF)(i,{prop:"collegeName",label:"学院",width:"180"}),(0,l.bF)(i,{label:"操作",width:"240"},{default:(0,l.k6)((e=>[(0,l.bF)(n,{onClick:t=>r.editTeacher(e.row),type:"primary",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("编辑")])),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:t=>r.deleteTeacher(e.row.id),type:"danger",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:t=>r.assignCourse(e.row),type:"success",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("分配课程")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.bF)(p,{modelValue:o.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>o.dialogVisible=e),title:"教师表单"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{model:o.teacherForm,rules:o.rules,ref:"teacherFormRef"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"姓名",prop:"name"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.teacherForm.name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.teacherForm.name=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"工号",prop:"code"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.teacherForm.code,"onUpdate:modelValue":t[2]||(t[2]=e=>o.teacherForm.code=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"密码",prop:"password"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{type:"password",modelValue:o.teacherForm.password,"onUpdate:modelValue":t[3]||(t[3]=e=>o.teacherForm.password=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"学院",prop:"collegeId"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:o.teacherForm.collegeId,"onUpdate:modelValue":t[4]||(t[4]=e=>o.teacherForm.collegeId=e),placeholder:"请选择学院"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.colleges,(e=>((0,l.uX)(),(0,l.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{type:"primary",onClick:r.saveTeacher},{default:(0,l.k6)((()=>[(0,l.eW)("保存")])),_:1},8,["onClick"]),(0,l.bF)(n,{onClick:t[5]||(t[5]=e=>o.dialogVisible=!1)},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,l.bF)(p,{modelValue:o.assignCourseDialogVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>o.assignCourseDialogVisible=e),title:"分配课程"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{data:o.assignedCourses,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"name",label:"课程名称",width:"180"}),(0,l.bF)(i,{prop:"term.name",label:"学期",width:"180"}),(0,l.bF)(i,{prop:"remark",label:"课程备注",width:"180"}),(0,l.bF)(i,{label:"操作",width:"180"},{default:(0,l.k6)((e=>[(0,l.bF)(n,{onClick:t=>r.removeCourse(e.row),type:"danger",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"选择课程"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:o.selectedCourseId,"onUpdate:modelValue":t[7]||(t[7]=e=>o.selectedCourseId=e),placeholder:"选择课程"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.availableCourses,(e=>((0,l.uX)(),(0,l.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{type:"primary",onClick:r.addCourse},{default:(0,l.k6)((()=>[(0,l.eW)("添加课程")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var ie={name:"TeacherManagement",data(){return{teachers:[],colleges:[],teacherForm:{id:null,name:"",code:"",password:"123456789",collegeId:""},dialogVisible:!1,assignCourseDialogVisible:!1,selectedTeacher:null,assignedCourses:[],availableCourses:[],selectedCourseId:null,search:"",rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],code:[{required:!0,message:"请输入工号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],collegeId:[{required:!0,message:"请选择学院",trigger:"change"}]}}},methods:{fetchTeachers(){R.fetchTeachers().then((e=>{this.teachers=e.data.map((e=>({id:e.teacher.id,name:e.teacher.name,code:e.teacher.code,password:e.teacher.password,collegeId:e.teacher.collegeId,collegeName:e.college.name})))})).catch((e=>{console.error("获取教师信息时出错:",e)}))},fetchColleges(){R.fetchColleges().then((e=>{this.colleges=e.data})).catch((e=>{console.error("获取学院信息时出错:",e)}))},openAddTeacherDialog(){this.teacherForm={id:null,name:"",code:"",password:"123456789",collegeId:""},this.dialogVisible=!0},editTeacher(e){this.teacherForm={...e,password:""},this.dialogVisible=!0},saveTeacher(){this.$refs.teacherFormRef.validate((e=>{if(!e)return this.$message.error("请填写完整信息"),!1;R.saveTeacher(this.teacherForm).then((()=>{this.$message.success("教师信息保存成功"),this.dialogVisible=!1,this.fetchTeachers()})).catch((e=>{console.error("保存教师信息时出错:",e),this.$message.error("保存教师信息时发生错误")}))}))},deleteTeacher(e){this.$confirm("此操作将永久删除该教师, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{R.deleteTeacher(e).then((()=>{this.$message.success("教师信息删除成功"),this.fetchTeachers()})).catch((e=>{console.error("删除教师信息时出错:",e),this.$message.error("删除教师信息时发生错误")}))})).catch((()=>{this.$message.info("已取消删除")}))},assignCourse(e){this.selectedTeacher=e,this.assignCourseDialogVisible=!0,this.fetchAssignedCourses(e.id),this.fetchAvailableCourses()},fetchAssignedCourses(e){R.fetchAssignedCourses(e).then((e=>{this.assignedCourses=e})).catch((e=>{console.error("获取教师课程信息时出错:",e)}))},fetchAvailableCourses(){R.fetchAvailableCourses().then((e=>{this.availableCourses=e.data})).catch((e=>{console.error("获取课程信息时出错:",e)}))},addCourse(){if(this.assignedCourses.some((e=>e.id===this.selectedCourseId)))return void this.$message.error("该课程已分配给教师，不能重复添加");const e={teacherId:this.selectedTeacher.id,courseId:this.selectedCourseId};R.addCourse(e).then((()=>{this.$message.success("课程分配成功"),this.fetchAssignedCourses(this.selectedTeacher.id)})).catch((e=>{console.error("课程分配时出错:",e),this.$message.error("课程分配时发生错误")}))},removeCourse(e){R.removeCourse(this.selectedTeacher.id,e.id).then((()=>{this.$message.success("课程删除成功"),this.fetchAssignedCourses(this.selectedTeacher.id)})).catch((e=>{console.error("课程删除时出错:",e),this.$message.error("课程删除时发生错误")}))}},mounted(){this.fetchTeachers(),this.fetchColleges()}};const ue=(0,v.A)(ie,[["render",de],["__scopeId","data-v-42d635ea"]]);var ce=ue;const he={class:"student-management"};function me(e,t,a,s,o,r){const n=(0,l.g2)("el-button"),d=(0,l.g2)("el-input"),i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-form-item"),h=(0,l.g2)("el-option"),m=(0,l.g2)("el-select"),g=(0,l.g2)("el-form"),p=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",he,[(0,l.bF)(n,{type:"primary",onClick:r.fetchStudents},{default:(0,l.k6)((()=>[(0,l.eW)("获取所有学生信息")])),_:1},8,["onClick"]),(0,l.bF)(n,{type:"success",onClick:r.openAddStudentDialog},{default:(0,l.k6)((()=>[(0,l.eW)("添加学生")])),_:1},8,["onClick"]),(0,l.bF)(d,{modelValue:o.search,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search=e),size:"default",placeholder:"输入关键字搜索",style:{margin:"20px 0"}},null,8,["modelValue"]),(0,l.bF)(u,{data:o.students.filter((e=>!o.search||e.name.toLowerCase().includes(o.search.toLowerCase()))),style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"id",label:"ID",width:"180"}),(0,l.bF)(i,{prop:"name",label:"姓名",width:"180"}),(0,l.bF)(i,{prop:"code",label:"学号",width:"180"}),(0,l.bF)(i,{prop:"className",label:"班级",width:"180"}),(0,l.bF)(i,{prop:"specialityName",label:"专业",width:"180"}),(0,l.bF)(i,{prop:"collegeName",label:"学院",width:"180"}),(0,l.bF)(i,{label:"操作",width:"180"},{default:(0,l.k6)((e=>[(0,l.bF)(n,{onClick:t=>r.editStudent(e.row),type:"primary",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("编辑")])),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:t=>r.deleteStudent(e.row.id),type:"danger",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.bF)(p,{modelValue:o.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>o.dialogVisible=e),title:"学生表单"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{model:o.studentForm,rules:o.rules,ref:"studentFormRef"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"姓名",prop:"name"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.studentForm.name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.studentForm.name=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"学号",prop:"code"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.studentForm.code,"onUpdate:modelValue":t[2]||(t[2]=e=>o.studentForm.code=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"密码",prop:"password"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{type:"password",modelValue:o.studentForm.password,"onUpdate:modelValue":t[3]||(t[3]=e=>o.studentForm.password=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"班级",prop:"classId"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:o.studentForm.classId,"onUpdate:modelValue":t[4]||(t[4]=e=>o.studentForm.classId=e),placeholder:"请选择班级"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.classGroups,(e=>((0,l.uX)(),(0,l.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{type:"primary",onClick:r.saveStudent},{default:(0,l.k6)((()=>[(0,l.eW)("保存")])),_:1},8,["onClick"]),(0,l.bF)(n,{onClick:t[5]||(t[5]=e=>o.dialogVisible=!1)},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}var ge={name:"StudentManagement",data(){return{students:[],classGroups:[],studentForm:{id:null,name:"",code:"",password:"123456789",classId:""},dialogVisible:!1,search:"",rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],code:[{required:!0,message:"请输入学号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],classId:[{required:!0,message:"请选择班级",trigger:"change"}]}}},methods:{fetchStudents(){z.fetchStudents().then((e=>{this.students=e.data.map((e=>({id:e.student.id,name:e.student.name,code:e.student.code,password:e.student.password,classId:e.student.classId,className:e.classGroup.name,specialityName:e.speciality.name,collegeName:e.college.name})))})).catch((e=>{console.error("获取学生信息时出错:",e)}))},fetchClassGroups(){z.fetchClassGroups().then((e=>{this.classGroups=e.data})).catch((e=>{console.error("获取班级信息时出错:",e)}))},openAddStudentDialog(){this.studentForm={id:null,name:"",code:"",password:"123456789",classId:""},this.dialogVisible=!0},editStudent(e){this.studentForm={...e,password:""},this.dialogVisible=!0},saveStudent(){this.$refs.studentFormRef.validate((e=>{if(!e)return this.$message.error("请填写完整信息"),!1;z.saveStudent(this.studentForm).then((()=>{this.$message.success("学生信息保存成功"),this.dialogVisible=!1,this.fetchStudents()})).catch((e=>{console.error("保存学生信息时出错:",e),this.$message.error("保存学生信息时发生错误")}))}))},deleteStudent(e){this.$confirm("此操作将永久删除该学生, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{z.deleteStudent(e).then((()=>{this.$message.success("学生信息删除成功"),this.fetchStudents()})).catch((e=>{console.error("删除学生信息时出错:",e),this.$message.error("删除学生信息时发生错误")}))})).catch((()=>{this.$message.info("已取消删除")}))}},mounted(){this.fetchStudents(),this.fetchClassGroups()}};const pe=(0,v.A)(ge,[["render",me],["__scopeId","data-v-4e4e533b"]]);var fe=pe;const be={class:"dean-management"};function ke(e,t,a,s,o,r){const n=(0,l.g2)("el-button"),d=(0,l.g2)("el-input"),i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-form-item"),h=(0,l.g2)("el-form"),m=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",be,[(0,l.bF)(n,{type:"primary",onClick:r.fetchDeans},{default:(0,l.k6)((()=>[(0,l.eW)("获取所有教务信息")])),_:1},8,["onClick"]),(0,l.bF)(n,{type:"success",onClick:r.openAddDeanDialog},{default:(0,l.k6)((()=>[(0,l.eW)("添加教务")])),_:1},8,["onClick"]),(0,l.bF)(d,{modelValue:o.search,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search=e),size:"default",placeholder:"输入关键字搜索",style:{margin:"20px 0"}},null,8,["modelValue"]),(0,l.bF)(u,{data:o.deans.filter((e=>!o.search||e.name.toLowerCase().includes(o.search.toLowerCase()))),style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"id",label:"ID",width:"180"}),(0,l.bF)(i,{prop:"name",label:"姓名",width:"180"}),(0,l.bF)(i,{prop:"code",label:"工号",width:"180"}),(0,l.bF)(i,{prop:"remark",label:"备注",width:"180"}),(0,l.bF)(i,{label:"操作",width:"180"},{default:(0,l.k6)((e=>[(0,l.bF)(n,{onClick:t=>r.editDean(e.row),type:"primary",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("编辑")])),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:t=>r.deleteDean(e.row.id),type:"danger",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.bF)(m,{modelValue:o.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>o.dialogVisible=e),title:"教务表单"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{model:o.deanForm,rules:o.rules,ref:"deanFormRef"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"姓名",prop:"name"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.deanForm.name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.deanForm.name=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"工号",prop:"code"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.deanForm.code,"onUpdate:modelValue":t[2]||(t[2]=e=>o.deanForm.code=e)},null,8,["modelValue"])])),_:1}),o.deanForm.id?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:0,label:"密码",prop:"password"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{type:"password",modelValue:o.deanForm.password,"onUpdate:modelValue":t[3]||(t[3]=e=>o.deanForm.password=e)},null,8,["modelValue"])])),_:1})),(0,l.bF)(c,{label:"备注",prop:"remark"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.deanForm.remark,"onUpdate:modelValue":t[4]||(t[4]=e=>o.deanForm.remark=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{type:"primary",onClick:r.saveDean},{default:(0,l.k6)((()=>[(0,l.eW)("保存")])),_:1},8,["onClick"]),(0,l.bF)(n,{onClick:t[5]||(t[5]=e=>o.dialogVisible=!1)},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}var Ce={name:"DeanManagement",data(){return{deans:[],deanForm:{id:null,name:"",code:"",password:"123456789",remark:""},dialogVisible:!1,search:"",rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],code:[{required:!0,message:"请输入工号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]}}},methods:{fetchDeans(){K.fetchDeans().then((e=>{this.deans=e.data})).catch((e=>{console.error("获取教务信息时出错:",e)}))},openAddDeanDialog(){this.deanForm={id:null,name:"",code:"",password:"123456789",remark:""},this.dialogVisible=!0},editDean(e){this.deanForm={...e,password:""},this.dialogVisible=!0},saveDean(){this.$refs.deanFormRef.validate((e=>{if(!e)return this.$message.error("请填写完整信息"),!1;K.saveDean(this.deanForm).then((()=>{this.$message.success("教务信息保存成功"),this.dialogVisible=!1,this.fetchDeans()})).catch((e=>{console.error("保存教务信息时出错:",e),this.$message.error("保存教务信息时发生错误")}))}))},deleteDean(e){this.$confirm("此操作将永久删除该教务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{K.deleteDean(e).then((()=>{this.$message.success("教务信息删除成功"),this.fetchDeans()})).catch((e=>{console.error("删除教务信息时出错:",e),this.$message.error("删除教务信息时发生错误")}))})).catch((()=>{this.$message.info("已取消删除")}))}},mounted(){this.fetchDeans()}};const Fe=(0,v.A)(Ce,[["render",ke],["__scopeId","data-v-514859c0"]]);var ve=Fe;const ye=e=>((0,l.Qi)("data-v-07169326"),e=e(),(0,l.jt)(),e),_e={class:"student-info"},Ie=ye((()=>(0,l.Lk)("h2",null,"学生基本信息",-1))),we=ye((()=>(0,l.Lk)("strong",null,"姓名:",-1))),Ve=ye((()=>(0,l.Lk)("strong",null,"学号:",-1))),Se=ye((()=>(0,l.Lk)("strong",null,"班级:",-1))),$e=ye((()=>(0,l.Lk)("strong",null,"专业:",-1))),We=ye((()=>(0,l.Lk)("strong",null,"学院:",-1)));function Le(e,t,a,s,o,r){const n=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.CE)("div",_e,[Ie,o.studentInfo?((0,l.uX)(),(0,l.Wv)(n,{key:0},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,[we,(0,l.eW)(" "+(0,w.v_)(o.studentInfo.student.name),1)]),(0,l.Lk)("p",null,[Ve,(0,l.eW)(" "+(0,w.v_)(o.studentInfo.student.code),1)]),(0,l.Lk)("p",null,[Se,(0,l.eW)(" "+(0,w.v_)(o.studentInfo.classGroup.name),1)]),(0,l.Lk)("p",null,[$e,(0,l.eW)(" "+(0,w.v_)(o.studentInfo.speciality.name),1)]),(0,l.Lk)("p",null,[We,(0,l.eW)(" "+(0,w.v_)(o.studentInfo.college.name),1)])])),_:1})):(0,l.Q3)("",!0)])}var Te={name:"StudentInfo",data(){return{studentInfo:null}},methods:{fetchStudentInfo(){const e=localStorage.getItem("user-code");e&&z.fetchStudentInfo(e).then((e=>{this.studentInfo=e.data})).catch((e=>{console.error("获取学生信息时出错:",e)}))}},mounted(){this.fetchStudentInfo()}};const De=(0,v.A)(Te,[["render",Le],["__scopeId","data-v-07169326"]]);var Ae=De;const Xe=e=>((0,l.Qi)("data-v-3e51feb2"),e=e(),(0,l.jt)(),e),xe={class:"student-course-management"},Ee=Xe((()=>(0,l.Lk)("h2",null,"我的课程与成绩",-1))),Me=Xe((()=>(0,l.Lk)("h3",null,"课程信息",-1))),Ue={key:1},qe=Xe((()=>(0,l.Lk)("h3",null,"成绩信息",-1))),Ge={key:3};function Ne(e,t,a,s,o,r){const n=(0,l.g2)("el-button"),d=(0,l.g2)("el-table-column"),i=(0,l.g2)("el-table");return(0,l.uX)(),(0,l.CE)("div",xe,[Ee,(0,l.bF)(n,{type:"primary",onClick:r.fetchCoursesAndScores},{default:(0,l.k6)((()=>[(0,l.eW)("获取我的课程与成绩")])),_:1},8,["onClick"]),Me,o.courses.length?((0,l.uX)(),(0,l.Wv)(i,{key:0,data:o.courses,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"courseName",label:"课程名称",width:"180"}),(0,l.bF)(d,{prop:"termName",label:"学期",width:"180"}),(0,l.bF)(d,{prop:"courseRemark",label:"课程注释",width:"180"})])),_:1},8,["data"])):((0,l.uX)(),(0,l.CE)("p",Ue,"没有课程信息")),qe,o.scores.length?((0,l.uX)(),(0,l.Wv)(i,{key:2,data:o.scores,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"courseName",label:"课程名称",width:"180"}),(0,l.bF)(d,{prop:"termName",label:"学期",width:"180"}),(0,l.bF)(d,{prop:"score",label:"成绩",width:"180"}),(0,l.bF)(d,{prop:"scoreRemark",label:"成绩备注",width:"180"})])),_:1},8,["data"])):((0,l.uX)(),(0,l.CE)("p",Ge,"没有成绩信息"))])}const Qe={getStudentByCode(e){return C.get(`/students/${e}`)},getClassCourses(e){return C.get(`/classCourse/getByClassId/${e}`)},getCourseDetails(e){return C.get(`/courses/${e}`)},getTermDetails(e){return C.get(`/terms/${e}`)},getStudentScores(e){return C.get(`/studentCourseScore/get/${e}`)}};var Be=Qe,je={name:"StudentCourseManagement",data(){return{courses:[],scores:[]}},methods:{async fetchCoursesAndScores(){try{const e=localStorage.getItem("user-code");if(!e)throw new Error("未找到学生学号");const t=await Be.getStudentByCode(e),a=t.data,s=a.classGroup.id,l=a.student.id,o=await Be.getClassCourses(s),r=o.data,n=r.map((async e=>{const t=await Be.getCourseDetails(e.courseId),a=t.data,s=await Be.getTermDetails(a.termId),l=s.data;return{courseName:a.name,termName:l.name,courseRemark:a.remark}}));this.courses=await Promise.all(n);const d=await Be.getStudentScores(l);let i=d.data;Array.isArray(i)||(i=[i]);const u=i.map((async e=>{const t=await Be.getCourseDetails(e.courseId),a=t.data,s=await Be.getTermDetails(a.termId),l=s.data;return{courseName:a.name,termName:l.name,score:e.score,scoreRemark:e.remark}}));this.scores=await Promise.all(u)}catch(e){console.error("获取课程与成绩信息时出错:",e),this.$message.error("获取课程与成绩信息时发生错误")}}},mounted(){this.fetchCoursesAndScores()}};const ze=(0,v.A)(je,[["render",Ne],["__scopeId","data-v-3e51feb2"]]);var Oe=ze;const Re=e=>((0,l.Qi)("data-v-332d0b2a"),e=e(),(0,l.jt)(),e),Pe={class:"teacher-info"},Ke=Re((()=>(0,l.Lk)("h2",null,"教师基本信息",-1))),He=Re((()=>(0,l.Lk)("strong",null,"姓名:",-1))),Je=Re((()=>(0,l.Lk)("strong",null,"工号:",-1))),Ye=Re((()=>(0,l.Lk)("strong",null,"学院:",-1))),Ze=Re((()=>(0,l.Lk)("strong",null,"学院备注:",-1))),et=Re((()=>(0,l.Lk)("h2",null,"教授课程信息",-1))),tt={key:2};function at(e,t,a,s,o,r){const n=(0,l.g2)("el-card"),d=(0,l.g2)("el-table-column"),i=(0,l.g2)("el-table");return(0,l.uX)(),(0,l.CE)("div",Pe,[Ke,o.teacherInfo&&o.collegeInfo?((0,l.uX)(),(0,l.Wv)(n,{key:0},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,[He,(0,l.eW)(" "+(0,w.v_)(o.teacherInfo.name),1)]),(0,l.Lk)("p",null,[Je,(0,l.eW)(" "+(0,w.v_)(o.teacherInfo.code),1)]),(0,l.Lk)("p",null,[Ye,(0,l.eW)(" "+(0,w.v_)(o.collegeInfo.name),1)]),(0,l.Lk)("p",null,[Ze,(0,l.eW)(" "+(0,w.v_)(o.collegeInfo.remark),1)])])),_:1})):(0,l.Q3)("",!0),et,o.courses.length?((0,l.uX)(),(0,l.Wv)(i,{key:1,data:o.courses,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{prop:"courseName",label:"课程名称",width:"180"}),(0,l.bF)(d,{prop:"termName",label:"学期",width:"180"})])),_:1},8,["data"])):((0,l.uX)(),(0,l.CE)("p",tt,"没有课程信息"))])}var st={name:"TeacherInfo",data(){return{teacherInfo:null,collegeInfo:null,courses:[]}},methods:{async fetchTeacherInfo(){try{const e=localStorage.getItem("user-code");if(!e)throw new Error("未找到教师工号");const t=await R.getTeacherByCode(e);this.teacherInfo=t.data;const a=await R.getCollegeById(this.teacherInfo.collegeId);this.collegeInfo=a.data;const s=await R.getTeacherCourses(this.teacherInfo.id),l=s.data,o=l.map((async e=>{const t=await R.getTermById(e.termId),a=t.data;return{courseName:e.name,termName:a.name}}));this.courses=await Promise.all(o)}catch(e){console.error("获取教师信息时出错:",e),this.$message.error("获取教师信息时发生错误")}}},mounted(){this.fetchTeacherInfo()}};const lt=(0,v.A)(st,[["render",at],["__scopeId","data-v-332d0b2a"]]);var ot=lt;const rt={class:"class-management"};function nt(e,t,a,s,o,r){const n=(0,l.g2)("el-button"),d=(0,l.g2)("el-input"),i=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),c=(0,l.g2)("el-form-item"),h=(0,l.g2)("el-option"),m=(0,l.g2)("el-select"),g=(0,l.g2)("el-form"),p=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",rt,[(0,l.bF)(n,{type:"primary",onClick:r.openAddClassDialog},{default:(0,l.k6)((()=>[(0,l.eW)("增加班级")])),_:1},8,["onClick"]),(0,l.bF)(d,{modelValue:o.search,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search=e),size:"default",placeholder:"输入关键字搜索",style:{margin:"20px 0"}},null,8,["modelValue"]),(0,l.bF)(u,{data:r.filteredClasses,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"classGroup.name",label:"班级名称",width:"180"}),(0,l.bF)(i,{prop:"classGroup.code",label:"班级代码",width:"180"}),(0,l.bF)(i,{prop:"speciality.name",label:"专业名称",width:"180"}),(0,l.bF)(i,{prop:"speciality.grade",label:"专业年级",width:"180"}),(0,l.bF)(i,{prop:"college.name",label:"学院名称",width:"180"}),(0,l.bF)(i,{label:"操作",width:"300"},{default:(0,l.k6)((e=>[(0,l.bF)(n,{onClick:t=>r.editClass(e.row),type:"primary",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("编辑")])),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:t=>r.deleteClass(e.row.classGroup.id),type:"danger",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:t=>r.assignCourse(e.row.classGroup.id),type:"success",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("分配课程")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.bF)(p,{modelValue:o.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>o.dialogVisible=e),title:"班级表单"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{model:o.classForm,rules:o.rules,ref:"classFormRef"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"班级名称",prop:"name"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.classForm.name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.classForm.name=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"班级代码",prop:"code"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.classForm.code,"onUpdate:modelValue":t[2]||(t[2]=e=>o.classForm.code=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"班级备注",prop:"remark"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:o.classForm.remark,"onUpdate:modelValue":t[3]||(t[3]=e=>o.classForm.remark=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"专业",prop:"specialityId"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:o.classForm.specialityId,"onUpdate:modelValue":t[4]||(t[4]=e=>o.classForm.specialityId=e),placeholder:"请选择专业"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.specialities,(e=>((0,l.uX)(),(0,l.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{type:"primary",onClick:r.saveClass},{default:(0,l.k6)((()=>[(0,l.eW)("保存")])),_:1},8,["onClick"]),(0,l.bF)(n,{onClick:t[5]||(t[5]=e=>o.dialogVisible=!1)},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,l.bF)(p,{modelValue:o.assignCourseDialogVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>o.assignCourseDialogVisible=e),title:"分配课程"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{data:o.assignedCourses,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(i,{prop:"course.name",label:"课程名称",width:"180"}),(0,l.bF)(i,{prop:"term.name",label:"学期",width:"180"}),(0,l.bF)(i,{prop:"course.remark",label:"课程备注",width:"180"}),(0,l.bF)(i,{label:"操作",width:"180"},{default:(0,l.k6)((e=>[(0,l.bF)(n,{onClick:t=>r.removeCourse(e.row.id),type:"danger",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"选择课程"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:o.selectedCourseId,"onUpdate:modelValue":t[7]||(t[7]=e=>o.selectedCourseId=e),placeholder:"选择课程"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.availableCourses,(e=>((0,l.uX)(),(0,l.Wv)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{type:"primary",onClick:r.addCourse},{default:(0,l.k6)((()=>[(0,l.eW)("添加课程")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const dt={fetchClasses(){return C.get("/class/joined/all")},fetchSpecialities(){return C.get("/speciality/all")},saveClass(e){const t=e.id?C.put:C.post,a=(e.id,"/class");return t(a,e)},deleteClass(e){return C.delete(`/class/${e}`)},fetchAssignedCourses(e){return C.get(`/classCourse/getByClassId/${e}`).then((e=>{const t=e.data.map((e=>C.get(`/courses/${e.courseId}`).then((t=>{const a=t.data;return C.get(`/terms/${a.termId}`).then((t=>({id:e.id,course:a,term:t.data})))}))));return Promise.all(t)}))},fetchAvailableCourses(){return C.get("/courses")},addCourse(e){return C.post("/classCourse/add",e)},removeCourse(e){return C.delete(`/classCourse/delete/${e}`)}};var it=dt,ut={name:"ClassManagement",data(){return{classes:[],specialities:[],classForm:{id:null,name:"",code:"",specialityId:null,remark:""},dialogVisible:!1,assignCourseDialogVisible:!1,selectedClassId:null,assignedCourses:[],availableCourses:[],selectedCourseId:null,search:"",rules:{name:[{required:!0,message:"请输入班级名称",trigger:"blur"}],code:[{required:!0,message:"请输入班级代码",trigger:"blur"}],specialityId:[{required:!0,message:"请选择专业",trigger:"change"}],remark:[{required:!0,message:"请输入班级备注",trigger:"blur"}]}}},computed:{filteredClasses(){return this.classes.filter((e=>!this.search||e.classGroup.name.toLowerCase().includes(this.search.toLowerCase())))}},methods:{fetchClasses(){it.fetchClasses().then((e=>{this.classes=e.data})).catch((e=>{console.error("获取班级信息时出错:",e)}))},fetchSpecialities(){it.fetchSpecialities().then((e=>{this.specialities=e.data})).catch((e=>{console.error("获取专业信息时出错:",e)}))},openAddClassDialog(){this.classForm={id:null,name:"",code:"",specialityId:null,remark:""},this.dialogVisible=!0},editClass(e){this.classForm={id:e.classGroup.id,name:e.classGroup.name,code:e.classGroup.code,specialityId:e.speciality.id,remark:e.classGroup.remark},this.dialogVisible=!0},saveClass(){this.$refs.classFormRef.validate((e=>{if(!e)return this.$message.error("请填写完整信息"),!1;{const e={id:this.classForm.id,name:this.classForm.name,code:this.classForm.code,specialityId:this.classForm.specialityId,remark:this.classForm.remark};it.saveClass(e).then((()=>{this.$message.success("班级信息保存成功"),this.dialogVisible=!1,this.fetchClasses()})).catch((e=>{console.error("保存班级信息时出错:",e),this.$message.error("保存班级信息时发生错误")}))}}))},deleteClass(e){it.deleteClass(e).then((()=>{this.$message.success("班级信息删除成功"),this.fetchClasses()})).catch((e=>{e.response&&500===e.response.status?this.$message.error("该班级存在未处理的学生，请处理完学生后再删除"):(console.error("删除班级信息时出错:",e),this.$message.error("删除班级信息时发生错误"))}))},assignCourse(e){this.selectedClassId=e,this.assignCourseDialogVisible=!0,this.fetchAssignedCourses(e),this.fetchAvailableCourses()},fetchAssignedCourses(e){it.fetchAssignedCourses(e).then((e=>{this.assignedCourses=e})).catch((e=>{console.error("获取班级课程信息时出错:",e)}))},fetchAvailableCourses(){it.fetchAvailableCourses().then((e=>{this.availableCourses=e.data})).catch((e=>{console.error("获取课程信息时出错:",e)}))},addCourse(){if(this.assignedCourses.some((e=>e.course.id===this.selectedCourseId)))return void this.$message.error("该课程已经分配给该班级");const e={classId:this.selectedClassId,courseId:this.selectedCourseId};it.addCourse(e).then((()=>{this.$message.success("课程分配成功"),this.fetchAssignedCourses(this.selectedClassId)})).catch((e=>{console.error("课程分配时出错:",e),this.$message.error("课程分配时发生错误")}))},removeCourse(e){it.removeCourse(e).then((()=>{this.$message.success("课程删除成功"),this.fetchAssignedCourses(this.selectedClassId)})).catch((e=>{console.error("课程删除时出错:",e),this.$message.error("课程删除时发生错误")}))}},mounted(){this.fetchClasses(),this.fetchSpecialities()}};const ct=(0,v.A)(ut,[["render",nt],["__scopeId","data-v-1ff4eb54"]]);var ht=ct;const mt=[{path:"/login",name:"Login",component:re},{path:"/",name:"Home",component:Y,meta:{requiresAuth:!0}},{path:"/teacherManagement",name:"TeacherManagement",component:ce,meta:{requiresAuth:!0,role:"dean"}},{path:"/studentManagement",name:"StudentManagement",component:fe,meta:{requiresAuth:!0,role:"dean"}},{path:"/deanManagement",name:"DeanManagement",component:ve,meta:{requiresAuth:!0,role:"dean"}},{path:"/studentInfo",name:"StudentInfo",component:Ae,meta:{requiresAuth:!0,role:"student"}},{path:"/studentCourseManagement",name:"StudentCourseManagement",component:Oe,meta:{requiresAuth:!0,role:"student"}},{path:"/teacherInfo",name:"TeacherInfo",component:ot,meta:{requiresAuth:!0,role:"teacher"}},{path:"/classManagement",name:"ClassManagement",component:ht,meta:{requiresAuth:!0,role:"dean"}}],gt=(0,I.aE)({history:(0,I.LA)("/"),routes:mt});gt.beforeEach(((e,t,a)=>{const s=e.matched.some((e=>e.meta.requiresAuth)),l=!!localStorage.getItem("user-code"),o=localStorage.getItem("user-type");s&&!l?a("/login"):e.meta.role&&e.meta.role!==o?a("/"):a()}));var pt=gt,ft=a(7147);a(4188);const bt=(0,s.Ef)(_);bt.use(pt),bt.use(ft.A),bt.mount("#app")}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,l,o){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],l=e[u][1],o=e[u][2];for(var n=!0,d=0;d<s.length;d++)(!1&o||r>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[d])}))?s.splice(d--,1):(n=!1,o<r&&(r=o));if(n){e.splice(u--,1);var i=l();void 0!==i&&(t=i)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,o,r=s[0],n=s[1],d=s[2],i=0;if(r.some((function(t){return 0!==e[t]}))){for(l in n)a.o(n,l)&&(a.m[l]=n[l]);if(d)var u=d(a)}for(t&&t(s);i<r.length;i++)o=r[i],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},s=self["webpackChunkeducation_system"]=self["webpackChunkeducation_system"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(4016)}));s=a.O(s)})();
//# sourceMappingURL=app.40a8425c.js.map